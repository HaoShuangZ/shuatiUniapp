"use strict";const s=require("../../../../common/vendor.js"),o=e=>{const t=e.lastIndexOf("."),i=e.length;return{name:e.substring(0,t),ext:e.substring(t+1,i)}},r=e=>Array.isArray(e)?e:e.replace(/(\[|\])/g,"").split(","),h=(e,t)=>{let i=[],a=[];return!t||t.length===0?{filePaths:i,files:a}:(e.tempFiles.forEach(n=>{const g=o(n.name).ext.toLowerCase();t.indexOf(g)!==-1&&(a.push(n),i.push(n.path))}),a.length!==e.tempFiles.length&&s.index.showToast({title:`当前选择了${e.tempFiles.length}个文件 ，${e.tempFiles.length-a.length} 个文件格式不正确`,icon:"none",duration:5e3}),{filePaths:i,files:a})},m=e=>new Promise((t,i)=>{s.index.getImageInfo({src:e,success(a){t(a)},fail(a){i(a)}})}),u=async(e,t="image")=>{const a=o(e.name).ext.toLowerCase();let n={name:e.name,uuid:e.uuid,extname:a||"",cloudPath:e.cloudPath,fileType:e.fileType,url:e.path||e.path,size:e.size,image:{},path:e.path,video:{}};if(t==="image"){const l=await m(e.path);delete n.video,n.image.width=l.width,n.image.height=l.height,n.image.location=l.path}else delete n.image;return n};exports.get_extname=r;exports.get_file_data=u;exports.get_files_and_is_max=h;
