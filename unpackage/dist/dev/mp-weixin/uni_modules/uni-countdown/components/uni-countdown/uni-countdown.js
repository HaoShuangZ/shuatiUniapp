"use strict";const n=require("../../../../common/vendor.js"),a=require("./i18n/index.js"),{t:u}=n.initVueI18n(a.messages),h={name:"UniCountdown",emits:["timeup"],props:{showDay:{type:Boolean,default:!0},showColon:{type:Boolean,default:!0},start:{type:Boolean,default:!0},backgroundColor:{type:String,default:""},color:{type:String,default:"#333"},fontSize:{type:Number,default:14},splitorColor:{type:String,default:"#333"},day:{type:Number,default:0},hour:{type:Number,default:0},minute:{type:Number,default:0},second:{type:Number,default:0},timestamp:{type:Number,default:0}},data(){return{timer:null,syncFlag:!1,d:"00",h:"00",i:"00",s:"00",leftTime:0,seconds:0}},computed:{dayText(){return u("uni-countdown.day")},hourText(e){return u("uni-countdown.h")},minuteText(e){return u("uni-countdown.m")},secondText(e){return u("uni-countdown.s")},timeStyle(){const{color:e,backgroundColor:s,fontSize:t}=this;return{color:e,backgroundColor:s,fontSize:`${t}px`,width:`${t*22/14}px`,lineHeight:`${t*20/14}px`,borderRadius:`${t*3/14}px`}},splitorStyle(){const{splitorColor:e,fontSize:s,backgroundColor:t}=this;return{color:e,fontSize:`${s*12/14}px`,margin:t?`${s*4/14}px`:""}}},watch:{day(e){this.changeFlag()},hour(e){this.changeFlag()},minute(e){this.changeFlag()},second(e){this.changeFlag()},start:{immediate:!0,handler(e,s){if(e)this.startData();else{if(!s)return;clearInterval(this.timer)}}}},created:function(e){this.seconds=this.toSeconds(this.timestamp,this.day,this.hour,this.minute,this.second),this.countDown()},unmounted(){clearInterval(this.timer)},methods:{toSeconds(e,s,t,r,i){return e?e-parseInt(new Date().getTime()/1e3,10):s*60*60*24+t*60*60+r*60+i},timeUp(){clearInterval(this.timer),this.$emit("timeup")},countDown(){let e=this.seconds,[s,t,r,i]=[0,0,0,0];e>0?(s=Math.floor(e/(60*60*24)),t=Math.floor(e/(60*60))-s*24,r=Math.floor(e/60)-s*24*60-t*60,i=Math.floor(e)-s*24*60*60-t*60*60-r*60):this.timeUp(),s<10&&(s="0"+s),t<10&&(t="0"+t),r<10&&(r="0"+r),i<10&&(i="0"+i),this.d=s,this.h=t,this.i=r,this.s=i},startData(){if(this.seconds=this.toSeconds(this.timestamp,this.day,this.hour,this.minute,this.second),this.seconds<=0){this.seconds=this.toSeconds(0,0,0,0,0),this.countDown();return}clearInterval(this.timer),this.countDown(),this.timer=setInterval(()=>{if(this.seconds--,this.seconds<0){this.timeUp();return}this.countDown()},1e3)},update(){this.startData()},changeFlag(){this.syncFlag||(this.seconds=this.toSeconds(this.timestamp,this.day,this.hour,this.minute,this.second),this.startData(),this.syncFlag=!0)}}};function l(e,s,t,r,i,o){return n.e({a:t.showDay},t.showDay?{b:n.t(i.d),c:n.s(o.timeStyle)}:{},{d:t.showDay},t.showDay?{e:n.t(o.dayText),f:n.s(o.splitorStyle)}:{},{g:n.t(i.h),h:n.s(o.timeStyle),i:n.t(t.showColon?":":o.hourText),j:n.s(o.splitorStyle),k:n.t(i.i),l:n.s(o.timeStyle),m:n.t(t.showColon?":":o.minuteText),n:n.s(o.splitorStyle),o:n.t(i.s),p:n.s(o.timeStyle),q:!t.showColon},t.showColon?{}:{r:n.t(o.secondText),s:n.s(o.splitorStyle)})}const c=n._export_sfc(h,[["render",l],["__scopeId","data-v-c592f7f2"],["__file","C:/Users/sygen/Documents/HBuilderProjects/brushQuestion-front/uni_modules/uni-countdown/components/uni-countdown/uni-countdown.vue"]]);wx.createComponent(c);
