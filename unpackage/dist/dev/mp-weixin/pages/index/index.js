"use strict";const e=require("../../common/vendor.js"),z=require("../../utils/wechat.js");require("../../utils/http.js");require("../../utils/config.js");require("../../utils/api.js");if(!Array){const h=e.resolveComponent("uni-segmented-control"),f=e.resolveComponent("uni-section"),i=e.resolveComponent("uni-popup");(h+f+i)()}const M=()=>"../../uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control.js",V=()=>"../../uni_modules/uni-section/components/uni-section/uni-section.js",F=()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js";Math||(M+V+F+e.unref(Q))();const Q=()=>"../../components/Ksp-Cropper/index.js",U={__name:"index",setup(h){const f=e.getCurrentInstance(),{$http:i}=f.appContext.config.globalProperties;e.onReady(()=>{}),e.onShow(()=>{let n=e.index.getStorageSync("token");k(),z.wechat.wxLogin(),n&&L()}),e.onLoad(()=>{e.index.getSystemInfo({success:n=>{console.log("获取当前设备信息",n),e.index.setStorageSync("phoneInfo",n),console.log("高度",n.screenHeight-n.safeAreaInsets.top-n.safeAreaInsets.bottom),e.wx$1.setStorageSync("screenHeight",n.screenHeight-n.safeAreaInsets.top*2+n.safeAreaInsets.bottom),e.wx$1.setStorageSync("safeAreaHeight",n.safeAreaInsets.top*2+n.safeAreaInsets.bottom)}})});const y=e.ref(null),S=["A","B","C","D"],m=n=>{e.index.navigateTo({url:n===0?"../index/search?type=0":"./docSearch"})};let w=e.ref(["热门文档","我的题库"]),s=e.ref(0);e.ref(0);let b=e.ref("#007aff"),C=e.ref("text"),p=e.ref(""),d=e.ref("");e.ref("");let _=e.ref(!0);const v=e.reactive({page:1,size:10});let a=e.ref([]);const k=()=>{let n={params:{page:v.page,size:v.size},callBack:o=>{a.value=o.records.filter(t=>t.hotFlag),console.log(a,"获取分页文档")}};i("getDocumentList",n)},A=()=>{e.index.chooseImage({count:1,encoding:"base64",success:n=>{p.value=n.tempFilePaths[0]}})},$=n=>{_.value=n.show},D=n=>{e.pathToBase64(n).then(o=>{T(o.split("data:image/png;base64,")[1])}).catch(o=>{console.error(o)})};let u=e.ref([]);const L=()=>{i("indexPageCollectList",{callBack:o=>{console.log("获取的列表",o),u.value=o}})},P=n=>{console.log("item",n),e.index.setStorageSync("pid",n.category.parentId),e.index.setStorageSync("fCurrentCategoryId",n.category.parentId),e.index.setStorageSync("currentCategoryId",n.categoryId),e.index.setStorageSync("currentCategoryDetail",n.category),e.index.navigateTo({url:`../constructor/constructorItem?categoryId=${n.categoryId}&categoryName=${n.category.categoryName}&parentId=${n.category.parentId}`})};let g=e.ref([]);const T=n=>{g.value=[],e.index.showLoading({title:"加载中"}),i("imgSearchBase64",{params:{ecode:n,page:1,size:10},callBack:t=>{e.index.hideLoading(),(t.code=1200)?(g.value=t.records,y.value.open("bottom")):e.index.showToast({title:t.message,icon:"error",duration:1e3}),console.log("e",t)}})},B=n=>{console.log(n),e.index.setStorageSync("docDetail",n),e.index.navigateTo({url:"../docView/docView"})},j=e.ref(""),q=n=>{p.value="",j.value=n.path,D(n.path)},H=()=>{p.value=""},N=n=>{s.value!==n.currentIndex&&(s.value=n.currentIndex)};return(n,o)=>e.e({a:"overflow:"+(e.unref(_)?"hidden":"visible"),b:e.o(A),c:e.o(t=>m(0)),d:e.o(t=>m(1)),e:e.o(N),f:e.p({current:e.unref(s),values:e.unref(w),["style-type"]:e.unref(C),["active-color"]:e.unref(b)}),g:e.unref(s)===0},e.unref(s)===0?e.e({h:e.unref(a).length===0},e.unref(a).length===0?{}:{i:e.f(e.unref(a),(t,l,x)=>({a:t.coverImage,b:e.t(t.docName),c:e.f(t.tags,(r,c,I)=>e.e({a:e.t(r),b:c!=t.tags.length-1},c!=t.tags.length-1?{}:{},{c:r})),d:e.t(t.downloadNum),e:e.o(r=>B(t),t.docId),f:t.docId}))},{j:e.unref(a).length===0?"100%":null}):{},{k:e.unref(s)===1},e.unref(s)===1?e.e({l:e.unref(u).length>0},e.unref(u).length>0?{m:e.f(e.unref(u),(t,l,x)=>({a:e.t(t.category&&t.category.categoryName||""),b:e.t(t.categoryQuestionNum||0),c:e.t(t.createTime),d:l,e:e.o(r=>P(t),l)}))}:{n:e.unref(u).length===0?"100%":null},{o:e.unref(u).length===0?"100%":null}):{},{p:e.unref(g).length>0},e.unref(g).length>0?{q:e.f(e.unref(g),(t,l,x)=>({a:e.t(l+1),b:e.t(t.questionTitle),c:e.f(t.options,(r,c,I)=>({a:e.t(S[c]),b:e.t(r),c})),d:e.f(t.rightOptions,(r,c,I)=>({a:e.t(r),b:c})),e:e.t(t.analysis||"暂无"),f:l}))}:{},{r:e.sr(y,"31d0b3dc-2",{k:"popup"}),s:e.o($),t:e.p({["background-color"]:"#fff"}),v:e.unref(d)},e.unref(d)?{w:e.unref(d)}:{},{x:e.o(H),y:e.o(q),z:e.p({mode:"free",width:600,height:440,maxWidth:1024,maxHeight:1024,url:e.unref(p)})})}},J=e._export_sfc(U,[["__file","C:/Users/sygen/Documents/HBuilderProjects/brushQuestion-front/pages/index/index.vue"]]);wx.createPage(J);
