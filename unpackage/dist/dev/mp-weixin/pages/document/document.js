"use strict";const e=require("../../common/vendor.js"),u={onLoad(){this.getCategoryTypeList()},onShow(){this.getCategoryTypeList()},methods:{clear(){this.docName="",this.getDocumentList()},cancel(){this.getDocumentList()},confirm(t){this.getDocumentList()},goDocumentView(t){console.log(t),e.index.setStorageSync("docDetail",t),e.index.navigateTo({url:"../docView/docView"})},typeChange(t){this.currentCategoryId=t.categoryId,this.getDocumentList(),this.questionList.map(o=>{o.line=!1,o.categoryId===t.categoryId&&(o.line=!0)})},categoryInit(t){this.questionList=[{categoryId:"",categoryName:"全部",children:[],level:1,line:!0,parentFlag:!0,parentId:0},...t]},getCategoryTypeList(){let t={callBack:a=>{a.length>1&&(e.index.setStorageSync("categoryParams",a),this.categoryInit(a),this.getDocumentList())}},o=e.index.getStorageSync("categoryParams");o?(this.categoryInit(o),this.getDocumentList()):this.$http("getCategoryType",t)},getDocumentList(){let t={params:{categoryId:this.currentCategoryId,docName:this.docName,page:1,size:100},callBack:o=>{this.documentList=o.records}};this.$http("getDocumentList",t)}},data(){return{searchVal:"",currentCategoryId:"",questionList:[],docName:"",documentList:[],statusBarHeight:e.wx$1.getStorageSync("phoneInfo").statusBarHeight+"px",navigationBarHeight:e.wx$1.getStorageSync("navigationBarHeight")+"px",menuButtonHeight:e.wx$1.getStorageSync("menuButtonHeight")+"px",navigationBarAndStatusBarHeight:e.wx$1.getStorageSync("statusBarHeight")+e.wx$1.getStorageSync("navigationBarHeight")+"px"}}};if(!Array){const t=e.resolveComponent("uni-search-bar"),o=e.resolveComponent("uni-section");(t+o)()}const h=()=>"../../uni_modules/uni-search-bar/components/uni-search-bar/uni-search-bar.js",d=()=>"../../uni_modules/uni-section/components/uni-section/uni-section.js";Math||(h+d)();function y(t,o,a,m,c,s){return e.e({a:e.o(s.confirm),b:e.o(s.clear),c:e.o(n=>c.docName=n),d:e.p({placeholder:"请输入要搜索的文档",cancelButton:"none",modelValue:c.docName}),e:e.f(c.questionList,(n,i,r)=>({a:n.categoryId,b:e.o(g=>s.typeChange(n),n.categoryId),c:"27b8e78c-1-"+r,d:e.p({title:n.categoryName,type:n.line?"line":""})})),f:`calc(100vh - ${c.statusBarHeight})`,g:c.documentList.length>0},c.documentList.length>0?{h:e.f(c.documentList,(n,i,r)=>({a:n.type===".docx"?"../../static/doc.png":`../../static/${n.type}.png`,b:e.t(n.docName),c:e.t(n.type),d:e.t(n.downloadNum||0),e:i,f:e.o(g=>s.goDocumentView(n),i)}))}:{},{i:`calc(100vh - ${c.statusBarHeight})`})}const l=e._export_sfc(u,[["render",y],["__file","C:/Users/sygen/Documents/HBuilderProjects/brushQuestion-front/pages/document/document.vue"]]);wx.createPage(l);
