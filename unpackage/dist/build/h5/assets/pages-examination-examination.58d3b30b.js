import{a3 as e,u as t,p as s,v as l,a4 as o,o as a,x as i,e as n,w as c,n as u,F as r,z as d,m as p,f as g,y as h,i as f,A as m,d as y,G as _,j as k,a5 as v,Z as C,I as q,D as x,T as b,E as I,l as R,a6 as w,a7 as S,t as T,B as z,a8 as F}from"./index-708d8c77.js";import{_ as B}from"./page-meta.36056e9b.js";import{b as L,c as N,d as j,o as H,r as Q}from"./uni-app.es.83c46ea6.js";import{_ as A}from"./uni-icons.45c91a6e.js";import{_ as E,a as O,b as V,c as D,d as U,e as G,f as K,g as P,h as W}from"./college.8d6383d3.js";import{_ as Z}from"./uni-popup.231e8e78.js";import{_ as $}from"./vip.823efb45.js";import{u as J}from"./index.fcc3bb88.js";import{_ as M}from"./_plugin-vue_export-helper.1b428a4d.js";const X=M({__name:"examination",setup(M){e().windowWidth,e().windowHeight,J(),t(1),t(!0);const X=t(0),Y=t(0);let ee=t(0);const te=d(),{$http:se}=te.appContext.config.globalProperties;s("statusBarHeight"),s("navigationBarHeight"),s("menuButtonHeight");const le=s("statusBarHeight")+s("navigationBarHeight")+"px",oe=()=>{console.log("123"),C({delta:1})},ae=t(null);let ie=t("card");const ne=e=>{ie.value=e,ae.value.open("bottom")};let ce=t(0);const ue=e=>{ee.value=e,console.log(ee,"questionType")},re=t(!1),de=e=>{re.value=e.show},pe=()=>{re.value=!1,ae.value.close()};let ge=t("");const he=()=>{let e={params:{notesContent:ge.value,categoryId:ve.value[ce.value].categoryId,questionId:ve.value[ce.value].questionId,userId:s("userInfo").userId,question:ve[ce.value]},callBack:e=>{console.log("笔记添加成功",e),re.value=!1,ae.value.close(),ge.value="",q({title:"笔记添加成功",icon:"none",duration:2e3})}};se("addNotes",e)};t([{content:"内容 A"},{content:"内容 B"},{content:"内容 C"}]);let fe=t(!1);const me=e=>{ce.value=e.detail.current,fe.value=ve.value[e.detail.current].collectFlag},ye=(e,t,s)=>{if(console.log("选择题选择的时候",e,t,s),console.log(e,t,s,"----"),!s.isSelected&&"单选题"===s.questionTypeName){e.isChecked=!0,s.isSelected=!0;let t=0;s.optionsList.map(((e,s)=>{e.isRight&&(e.isChecked=!0),e.isChecked&&t++})),1==t?(s.isSelectRight=!0,ke.push({categoryId:s.categoryId,questionId:s.questionId,status:1,questionTypeName:s.questionTypeName})):(s.isSelectRight=!1,!s.errorHistoryFlag&&_e(s.categoryId,s.questionId,2),ke.push({categoryId:s.categoryId,questionId:s.questionId,status:2,questionTypeName:s.questionTypeName})),console.log("处理出错添加的数据",ke)}s.isSelected||"多选题"!==s.questionTypeName||(console.log("多选题"),e.isChecked=!0)},_e=(e,t,s)=>{se("addErrQuestion",{params:{categoryId:e,questionId:t,status:s},callBack:e=>{console.log("错题添加成功",e)}})},ke=l([]);o((()=>ve.value[ce.value].collectFlag));let ve=t([]);const Ce=l({page:1,size:10,total:10}),qe=["A","B","C","D","E","F"];return L((e=>{console.log("listType",e),0==e.listType&&(e=>{let t={params:{categoryId:Number(e),page:Ce.page,size:Ce.size},callBack:e=>{console.log("res",e.records),e.records.map(((e,t)=>{const s=e.options.map((e=>({label:e,isChecked:"",isRight:!1})));let l=[];e.options.map(((t,s)=>{e.rightOptions.map(((e,o)=>{t===e&&l.push(s)}))})),console.log("rightAnswerItem",l),e.rightAnswerItem=l;const o=s.map((t=>(e.rightOptions.includes(t.label)&&(t.isRight=!0),t)));e.optionsList=o,e.isSelected=!1})),ve.value=e.records,fe.value=e.records[ce.value].collectFlag,Ce.page=e.page,Ce.size=e.size,Ce.total=e.total}};se("getQuestionList",t)})(s("currentCategoryId")),11==e.listType&&(ee.value=1,(()=>{let e={params:{page:Ce.page,size:Ce.size},callBack:e=>{console.log("获取错题数据",e),e.records.map(((e,t)=>{const s=e.question.options.map((e=>({label:e,isChecked:"",isRight:!1})));console.log("optionObjects",s);const l=s.map((t=>(e.question.rightOptions.includes(t.label)&&(t.isRight=!0),t)));e.question.optionsList=l,e.question.isSelected=!1}));let t=e.records.map((e=>e.question));ve.value=[...t],fe.value=e.records[ce.value].collectFlag,Ce.page=e.page,Ce.size=e.size,Ce.total=e.total}};se("getErrorQuestionList",e)})())})),N((()=>{console.log("隐藏页面")})),j((()=>{console.log("页面销毁"),ke.length>0&&se("addErrQuestionList",{params:{questionRecordList:ke},callBack:e=>{console.log("批量添加错题记录",e)}})})),H((()=>{})),(e,t)=>{const s=Q(x("page-meta"),B),l=Q(x("uni-icons"),A),o=b,d=p,C=Q(x("uni-nav-bar"),K),L=I,N=R,j=F,H=w,J=S,M=Q(x("uni-popup"),Z);return a(),i(r,null,[n(s,{"page-style":"overflow:"+(re.value?"hidden":"visible")},null,8,["page-style"]),n(C,{style:u({height:le,display:"flex",width:"100%"}),"status-bar":!0,title:""},{left:c((()=>[n(l,{onClick:oe,type:"back",color:"#000",size:"24"})])),default:c((()=>[n(d,{class:"input-view"},{default:c((()=>[n(o,{class:g(["type-button mini-btn",{"active-btn":!h(ee)}]),onClick:t[0]||(t[0]=e=>ue(0))},{default:c((()=>[f("答题")])),_:1},8,["class"]),n(o,{class:g(["type-button mini-btn",{"active-btn":h(ee)}]),onClick:t[1]||(t[1]=e=>ue(1))},{default:c((()=>[f("背题")])),_:1},8,["class"])])),_:1})])),_:1},8,["style"]),n(d,{class:"container","page-font-size":"{{pageFontSize}}","root-font-size":"{{rootFontSize}}"},{default:c((()=>[n(H,{class:"swiper",current:h(ce),onChange:me},{default:c((()=>[(a(!0),i(r,null,m(h(ve),((s,l)=>(a(),y(j,{key:l},{default:c((()=>[n(d,null,{default:c((()=>[n(d,{class:"question",style:{padding:"0 20rpx"}},{default:c((()=>[n(d,{class:"question-title"},{default:c((()=>[n(L,{class:"option-tag"},{default:c((()=>[f(_(s.difficulty),1)])),_:2},1024),f(" "+_(l+1)+"、 "+_(s.questionTitle),1)])),_:2},1024),"单选题"===s.questionTypeName&&0===h(ee)?(a(),y(d,{key:0,class:"question-options"},{default:c((()=>[(a(!0),i(r,null,m(s.optionsList,((e,t)=>(a(),y(d,{class:"question-option",key:t,onClick:l=>ye(e,t,s)},{default:c((()=>[n(L,{class:g(["option",{"option-right":!0===s.isSelected&&e.isRight,"option-error":!0===e.isChecked&&e.isChecked!==e.isRight}])},{default:c((()=>[s.isSelected&&e.isChecked?k("",!0):(a(),y(L,{key:0},{default:c((()=>[f(_(qe[t]),1)])),_:2},1024))])),_:2},1032,["class"]),n(L,{class:g(["option-item",{"option-right-text":!0===s.optionsList.isSelected&&e.isRight,"option-error-text":!0===e.isChecked&&e.isChecked!==e.isRight}])},{default:c((()=>[f(_(e.label),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:2},1024)):k("",!0),"多选题"===s.questionTypeName&&0===h(ee)?(a(),y(d,{key:1},{default:c((()=>[(a(!0),i(r,null,m(s.optionsList,((e,t)=>(a(),y(d,{class:"question-option",key:t,onClick:l=>ye(e,t,s)},{default:c((()=>[n(L,{class:g(["option",{"more-option-select":e.isChecked||!0===s.isSelected&&e.isRight,"more-option-error":!0===s.isSelected&&!0===e.isChecked&&e.isChecked!==e.isRight}])},{default:c((()=>[n(L,null,{default:c((()=>[f(_(qe[t]),1)])),_:2},1024)])),_:2},1032,["class"]),n(L,{class:g(["option-item",{"option-right-text":e.isChecked,"option-error-text":!0===s.isSelected&&e.isChecked&&e.isChecked!==e.isRight}])},{default:c((()=>[f(_(e.label),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:2},1024)):k("",!0),1===h(ee)?(a(),y(d,{key:2},{default:c((()=>["单选题"===s.questionTypeName?(a(),y(d,{key:0,class:"question-options"},{default:c((()=>[(a(!0),i(r,null,m(s.optionsList,((e,t)=>(a(),y(d,{class:"question-option",key:t},{default:c((()=>[n(L,{class:g(["option",{"option-right":e.isRight,"option-error":!0===e.isChecked&&e.isChecked!==e.isRight}])},{default:c((()=>[s.isSelected&&e.isChecked?k("",!0):(a(),y(L,{key:0},{default:c((()=>[f(_(e.isRight?null:qe[t]),1)])),_:2},1024))])),_:2},1032,["class"]),n(L,{class:g(["option-item",{"option-right-text":e.isRight,"option-error-text":!0===e.isChecked&&e.isChecked!==e.isRight}])},{default:c((()=>[f(_(e.label),1)])),_:2},1032,["class"])])),_:2},1024)))),128))])),_:2},1024)):k("",!0),"多选题"===s.questionTypeName?(a(),y(d,{key:1},{default:c((()=>[(a(!0),i(r,null,m(s.optionsList,((e,t)=>(a(),y(d,{class:"question-option",key:t},{default:c((()=>[n(L,{class:g(["option",{"more-option-select":e.isRight,"more-option-error":!0===s.isSelected&&!0===e.isChecked&&e.isChecked!==e.isRight}])},{default:c((()=>[n(L,null,{default:c((()=>[f(_(qe[t]),1)])),_:2},1024)])),_:2},1032,["class"]),n(L,{class:g(["option-item",{"option-right-text":e.isRight,"option-error-text":!0===s.isSelected&&e.isChecked&&e.isChecked!==e.isRight}])},{default:c((()=>[f(_(e.label),1)])),_:2},1032,["class"])])),_:2},1024)))),128))])),_:2},1024)):k("",!0)])),_:2},1024)):k("",!0),0!==h(ee)||"多选题"!=s.questionTypeName||s.isSelected?k("",!0):(a(),y(o,{key:3,class:"post-answer",onClick:t=>(e.option,e.optionIndex,void(s.isSelected=!0))},{default:c((()=>[f("提交答案")])),_:2},1032,["onClick"])),s.isSelected||1==h(ee)?(a(),y(d,{key:4,class:"answer"},{default:c((()=>[n(L,{style:{"font-weight":"500"}},{default:c((()=>[f("答案 ")])),_:1}),(a(!0),i(r,null,m(s.options,((e,t)=>(a(),y(L,{style:{color:"#4674f7"},key:t},{default:c((()=>[(a(!0),i(r,null,m(s.rightOptions,((s,l)=>(a(),y(L,{key:s},{default:c((()=>[f(_(e==s?qe[t]:""),1)])),_:2},1024)))),128))])),_:2},1024)))),128)),n(L,{style:{color:"#4674f7"}},{default:c((()=>[f(_(e.currentQuestionRightItem),1)])),_:1}),n(L,{style:{color:"#4674f7",float:"right"},onClick:e=>{return t=s,console.log("答案报错",t),T("errQuestionDetail",t),void z({url:"../addErrorQuestion/index?feedType=errAnswerFeed"});var t}},{default:c((()=>[f("报错")])),_:2},1032,["onClick"])])),_:2},1024)):k("",!0)])),_:2},1024),s.isSelected||1==h(ee)?(a(),y(d,{key:0,style:{width:"100%",height:"20rpx","background-color":"#f3f3f3"}})):k("",!0),s.isSelected||1==h(ee)?(a(),y(d,{key:1,class:"bottom-content"},{default:c((()=>[n(d,{class:"analysis"},{default:c((()=>[n(d,{style:{width:"100%",height:"60rpx"}},{default:c((()=>[n(L,{class:"answer-info"},{default:c((()=>[f("解析")])),_:1}),n(N,{src:P,style:{width:"35rpx",height:"35rpx","margin-right":"10rpx"},alt:""}),n(N,{src:$,style:{width:"50rpx",height:"25rpx","margin-right":"10rpx"},alt:"",srcset:""})])),_:1}),n(d,{style:{width:"100%","min-height":"50rpx","line-height":"50rpx",display:"inline-block"}},{default:c((()=>[f(_(s.analysis),1)])),_:2},1024)])),_:2},1024),n(d,{class:"note"},{default:c((()=>[n(L,{class:"answer-info"},{default:c((()=>[f("笔记")])),_:1}),n(L,{style:{color:"#4674f7",float:"right"},onClick:t[2]||(t[2]=e=>ne("notes"))},{default:c((()=>[f("添加笔记")])),_:1})])),_:1})])),_:2},1024)):k("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["current"]),n(d,{class:"foote"},{default:c((()=>[n(d,null,{default:c((()=>[n(d,{class:"popup-header"},{default:c((()=>[n(d,{class:"popup-left"},{default:c((()=>[n(d,{class:"icon-item",onClick:t[3]||(t[3]=e=>(e=>{console.log("收藏问题",e);let t={params:{categoryId:ve.value[ce.value].categoryId,questionId:ve.value[ce.value].questionId},callBack:t=>{console.log("问题shouc",t),fe.value=!fe.value,ve.value[ce.value].collectFlag=!e,q({title:e?"删除成功":"收藏成功",icon:"none",duration:2e3})}};se(e?"removeCollectQuestion":"collectQuestion",t)})(h(fe)))},{default:c((()=>[h(fe)?(a(),i("div",{key:1},[n(N,{class:"img",src:O,alt:"收藏",srcset:""}),n(L,null,{default:c((()=>[f("收藏")])),_:1})])):(a(),y(N,{key:0,class:"img",src:E,alt:"收藏",srcset:""}))])),_:1}),n(d,{class:"icon-item"},{default:c((()=>[n(N,{class:"img",src:V,alt:"删除",srcset:""}),n(L,null,{default:c((()=>[f("删除")])),_:1})])),_:1})])),_:1}),n(d,{class:"popup-right"},{default:c((()=>[n(d,{class:"icon-item"},{default:c((()=>[n(N,{class:"img",src:D,alt:"正确"}),n(L,null,{default:c((()=>[f(_(X.value),1)])),_:1})])),_:1}),n(d,{class:"icon-item"},{default:c((()=>[n(N,{class:"img",src:U,alt:"错误"}),n(L,null,{default:c((()=>[f(_(Y.value),1)])),_:1})])),_:1}),n(d,{class:"icon-item",onClick:t[4]||(t[4]=e=>ne("card"))},{default:c((()=>[n(N,{class:"img",src:G,alt:"面板"}),n(L,null,{default:c((()=>[f("答题卡")])),_:1})])),_:1})])),_:1})])),_:1}),n(M,{ref_key:"popup",ref:ae,"background-color":"#fff",onChange:de},{default:c((()=>["card"===h(ie)?(a(),y(d,{key:0,class:g(["popup-content",{"popup-height":!1}])},{default:c((()=>[(a(!0),i(r,null,m(h(ve),((e,t)=>(a(),y(d,{key:t},{default:c((()=>[f(_(e.isSelectRight)+" ",1),n(d,{class:g(["item-list",{"item-list-isRight":e.errorHistoryFlag,"item-list-error":e.errorHistoryFlag,"item-list-current":h(ce)==t}]),onClick:e=>(e=>{ce.value=e,re.value=!1,ae.value.close()})(t)},{default:c((()=>[f(_(t+1)+" ",1),e.collectFlag?(a(),y(N,{key:0,class:"item-icon",src:W,alt:""})):k("",!0)])),_:2},1032,["class","onClick"])])),_:2},1024)))),128))])),_:1},8,["class"])):k("",!0),"notes"===h(ie)?(a(),y(d,{key:1},{default:c((()=>[n(d,{style:{padding:"0 10rpx","line-height":"80rpx",height:"80rpx","background-color":"#f2f2f2",display:"flex","justify-content":"space-between"}},{default:c((()=>[n(l,{type:"closeempty",size:"20",onClick:pe}),n(d,{style:{color:"#4674F6"},onClick:he},{default:c((()=>[f("确认")])),_:1})])),_:1}),n(J,{class:"width:100%;height:100rpx",type:"textarea",modelValue:h(ge),"onUpdate:modelValue":t[5]||(t[5]=e=>v(ge)?ge.value=e:ge=e),placeholder:"请输入笔记"},null,8,["modelValue"])])),_:1})):k("",!0)])),_:1},512)])),_:1})])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-1c9846fb"]]);export{X as default};
