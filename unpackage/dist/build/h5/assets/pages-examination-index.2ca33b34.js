import{p as e,ag as a,t as l,D as t,o,d as s,w as i,i as r,G as u,j as n,e as d,f as c,x as m,F as f,A as p,m as h,E as _,S as g,R as D,W as y,B as b,ah as x,l as v,T as w}from"./index-708d8c77.js";import{_ as V,a as S}from"./uni-row.7b8cdd96.js";import{r as k}from"./uni-app.es.83c46ea6.js";import{_ as C}from"./uni-easyinput.887c0857.js";import{_ as N,a as I}from"./uni-forms.59b93cf5.js";import{D as R}from"./uni-cloud.es.ec803124.js";import{_ as T}from"./uni-icons.45c91a6e.js";import{_ as P}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as j}from"./vip.823efb45.js";const F=P({name:"uni-stat-select",mixins:[R.mixinDatacom||{}],data:()=>({showSelector:!1,current:"",mixinDatacomResData:[],apps:[],channels:[]}),props:{localdata:{type:Array,default:()=>[]},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},label:{type:String,default:""},placeholder:{type:String,default:"请选择"},emptyTips:{type:String,default:"无选项"},clear:{type:Boolean,default:!0},defItem:{type:Number,default:0},disabled:{type:Boolean,default:!1}},created(){this.last=`${this.collection}_last_selected_option_value`,this.collection&&!this.localdata.length&&this.mixinDatacomEasyGet()},computed:{typePlaceholder(){const e=this.placeholder,a={"opendb-stat-app-versions":"版本","opendb-app-channels":"渠道","opendb-app-list":"应用"}[this.collection];return a?e+a:e}},watch:{localdata:{immediate:!0,handler(e,a){Array.isArray(e)&&a!==e&&(this.mixinDatacomResData=e)}},modelValue(){this.initDefVal()},mixinDatacomResData:{immediate:!0,handler(e){e.length&&this.initDefVal()}}},methods:{initDefVal(){let a="";if(!this.value&&0!==this.value||this.isDisabled(this.value))if(!this.modelValue&&0!==this.modelValue||this.isDisabled(this.modelValue)){let l;if(this.collection&&(l=e(this.last)),l||0===l)a=l;else{let e="";this.defItem>0&&this.defItem<this.mixinDatacomResData.length&&(e=this.mixinDatacomResData[this.defItem-1].value),a=e}this.emit(a)}else a=this.modelValue;else a=this.value;const l=this.mixinDatacomResData.find((e=>e.value===a));this.current=l?this.formatItemName(l):""},isDisabled(e){let a=!1;return this.mixinDatacomResData.forEach((l=>{l.value===e&&(a=l.disable)})),a},clearVal(){this.emit(""),this.collection&&a(this.last)},change(e){e.disable||(this.showSelector=!1,this.current=this.formatItemName(e),this.emit(e.value))},emit(e){this.$emit("change",e),this.$emit("input",e),this.$emit("update:modelValue",e),this.collection&&l(this.last,e)},toggleSelector(){this.disabled||(this.showSelector=!this.showSelector)},formatItemName(e){let{text:a,value:l,channel_code:t}=e;return t=t?`(${t})`:"",this.collection.indexOf("app-list")>0?`${a}(${l})`:a||`未命名${t}`}}},[["render",function(e,a,l,D,y,b){const x=h,v=k(t("uni-icons"),T),w=_,V=g;return o(),s(x,{class:"uni-stat__select"},{default:i((()=>[l.label?(o(),s(x,{key:0,class:"uni-label-text hide-on-phone"},{default:i((()=>[r(u(l.label+"："),1)])),_:1})):n("",!0),d(x,{class:c(["uni-stat-box",{"uni-stat__actived":y.current}])},{default:i((()=>[d(x,{class:c(["uni-select",{"uni-select--disabled":l.disabled}])},{default:i((()=>[d(x,{class:"uni-select__input-box",onClick:b.toggleSelector},{default:i((()=>[y.current?(o(),s(x,{key:0,class:"uni-select__input-text"},{default:i((()=>[r(u(y.current),1)])),_:1})):(o(),s(x,{key:1,class:"uni-select__input-text uni-select__input-placeholder"},{default:i((()=>[r(u(b.typePlaceholder),1)])),_:1})),y.current&&l.clear?(o(),s(v,{key:2,type:"clear",color:"#c0c4cc",size:"24",onClick:b.clearVal},null,8,["onClick"])):(o(),s(v,{key:3,type:y.showSelector?"top":"bottom",size:"14",color:"#999"},null,8,["type"]))])),_:1},8,["onClick"]),y.showSelector?(o(),s(x,{key:0,class:"uni-select--mask",onClick:b.toggleSelector},null,8,["onClick"])):n("",!0),y.showSelector?(o(),s(x,{key:1,class:"uni-select__selector"},{default:i((()=>[d(x,{class:"uni-popper__arrow"}),d(V,{"scroll-y":"true",class:"uni-select__selector-scroll"},{default:i((()=>[0===y.mixinDatacomResData.length?(o(),s(x,{key:0,class:"uni-select__selector-empty"},{default:i((()=>[d(w,null,{default:i((()=>[r(u(l.emptyTips),1)])),_:1})])),_:1})):(o(!0),m(f,{key:1},p(y.mixinDatacomResData,((e,a)=>(o(),s(x,{class:"uni-select__selector-item",key:a,onClick:a=>b.change(e)},{default:i((()=>[d(w,{class:c({"uni-select__selector__disabled":e.disable})},{default:i((()=>[r(u(b.formatItemName(e)),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):n("",!0)])),_:1},8,["class"])])),_:1},8,["class"])])),_:1})}],["__scopeId","data-v-83ff44ed"]]);const O=P({onLoad(e){console.log("模拟考试页面获取的参数",e)},data:()=>({formData:{radio:"10",radioScore:"1",multiple:"10",multipleScore:"1",examTime:"40",score:"15",showRight:!1,optionOrder:!1,worongPrior:!1,doneNot:!1,moreDataWay:1},range:[{value:0,text:"漏题，按正常答案选项数，算平均分"},{value:1,text:"全部选对，才算得分"},{value:2,text:"漏选，得 50% 分"}],rules:{radio:{rules:[{required:!0,errorMessage:"题目数量必填"},{validateFunction:(e,a,l,t)=>(console.log(a,"value"),a>0&&a<=100||t("题目数小于100"))}]},radioScore:{rules:[{required:!0,errorMessage:"分值不能为空"},{validateFunction:(e,a,l,t)=>(console.log(a,"value"),a>0&&a<=10||t("分值必须小于10"))}]},multiple:{rules:[{required:!0,errorMessage:"多选题目数量不能为空"},{validateFunction:(e,a,l,t)=>(console.log(a,"value"),a>0&&a<=200||t("多选题数量必须小于200"))}]},multipleScore:{rules:[{required:!0,errorMessage:"多选题目分数不能为空"},{validateFunction:(e,a,l,t)=>(console.log(a,"value"),a>0&&a<=20||t("多选题分数小于20"))}]},examTime:{rules:[{required:!0,errorMessage:"考试时间不能为空"}]},score:{rules:[{required:!0,errorMessage:"及格分数不能为空"},{validateFunction:(e,a,l,t)=>{if(console.log("及格分数",l),a>=(null==l?void 0:l.radio)*(null==l?void 0:l.radioScore)+(null==l?void 0:l.multiple)*(null==l?void 0:l.multipleScore))return t("及格分数必须小于总分数")}}]}}}),methods:{vipSwitch(a){1e3==e("userInfo").vipFlag?D({title:"提示",content:"该功能为VIP专享服务，请购买VIP",confirmText:"前往购买",success:e=>{console.log(e),e.confirm&&y({url:"../vip/vip"})}}):"optionOrder"==a?this.formData.optionOrder=!this.formData.optionOrder:this.formData.worongPrior=!this.formData.worongPrior},submitForm(){this.$refs.formData.validate().then((a=>{console.log("res",a),1e3==e("userInfo").vipFlag?D({title:"提示",content:"该功能为VIP专享服务，请购买VIP",confirmText:"前往购买",success:e=>{console.log(e),e.confirm&&y({url:"../vip/vip"})}}):(l("examSetting",a),l("answerDataList",[]),l("exerciseResult",{}),b({url:"../answer/index?listType=1"}))})).catch((e=>{console.log("表单验证错误",e)}))}},computed:{totalTopic(){return Number(this.formData.radio)+Number(this.formData.multiple)},totalScore(){return Number(this.formData.radioScore)*Number(this.formData.radio)+Number(this.formData.multipleScore)*Number(this.formData.multiple)}}},[["render",function(e,a,l,n,c,m){const f=h,p=k(t("uni-col"),V),_=k(t("uni-row"),S),g=k(t("uni-easyinput"),C),D=k(t("uni-forms-item"),N),y=x,b=v,R=k(t("uni-data-select"),F),T=w,P=k(t("uni-forms"),I);return o(),s(f,{class:"container"},{default:i((()=>[d(f,{class:""},{default:i((()=>[d(P,{modelValue:c.formData,ref:"formData",rules:c.rules},{default:i((()=>[d(_,{class:"uni-row"},{default:i((()=>[d(p,{span:8},{default:i((()=>[d(f,null,{default:i((()=>[r("题型(可多选)")])),_:1})])),_:1}),d(p,{span:8},{default:i((()=>[d(f,null,{default:i((()=>[r("题数")])),_:1})])),_:1}),d(p,{span:8},{default:i((()=>[d(f,null,{default:i((()=>[r("分值")])),_:1})])),_:1})])),_:1}),d(_,{class:"uni-row"},{default:i((()=>[d(p,{span:8},{default:i((()=>[d(f,null,{default:i((()=>[r("单选题")])),_:1})])),_:1}),d(p,{span:8},{default:i((()=>[d(D,{name:"radio"},{default:i((()=>[d(g,{clearable:!1,type:"number",modelValue:c.formData.radio,"onUpdate:modelValue":a[0]||(a[0]=e=>c.formData.radio=e)},null,8,["modelValue"])])),_:1})])),_:1}),d(p,{span:8},{default:i((()=>[d(D,{name:"radioScore"},{default:i((()=>[d(g,{clearable:!1,type:"number",modelValue:c.formData.radioScore,"onUpdate:modelValue":a[1]||(a[1]=e=>c.formData.radioScore=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(_,{class:"uni-row"},{default:i((()=>[d(p,{span:8},{default:i((()=>[d(f,null,{default:i((()=>[r("多选题")])),_:1})])),_:1}),d(p,{span:8},{default:i((()=>[d(D,{name:"multiple"},{default:i((()=>[d(g,{clearable:!1,type:"number",modelValue:c.formData.multiple,"onUpdate:modelValue":a[2]||(a[2]=e=>c.formData.multiple=e)},null,8,["modelValue"])])),_:1})])),_:1}),d(p,{span:8},{default:i((()=>[d(D,{name:"multipleScore"},{default:i((()=>[d(g,{clearable:!1,type:"number",modelValue:c.formData.multipleScore,"onUpdate:modelValue":a[3]||(a[3]=e=>c.formData.multipleScore=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(_,{class:"uni-row",style:{"text-align":"center"}},{default:i((()=>[d(p,{offset:2,span:10},{default:i((()=>[d(f,null,{default:i((()=>[r("总题:"+u(m.totalTopic),1)])),_:1})])),_:1}),d(p,{span:10},{default:i((()=>[d(f,null,{default:i((()=>[r("总分:"+u(m.totalScore),1)])),_:1})])),_:1})])),_:1}),d(f,null,{default:i((()=>[d(_,{class:"uni-row"},{default:i((()=>[d(p,{span:11},{default:i((()=>[d(f,null,{default:i((()=>[r("考试时间")])),_:1})])),_:1}),d(p,{span:10},{default:i((()=>[d(D,{name:"examTime"},{default:i((()=>[d(g,{clearable:!1,type:"number",modelValue:c.formData.examTime,"onUpdate:modelValue":a[4]||(a[4]=e=>c.formData.examTime=e)},null,8,["modelValue"])])),_:1})])),_:1}),d(p,{span:3},{default:i((()=>[d(f,null,{default:i((()=>[r("分钟")])),_:1})])),_:1})])),_:1}),d(_,{class:"uni-row"},{default:i((()=>[d(p,{span:11},{default:i((()=>[d(f,null,{default:i((()=>[r("及格分数")])),_:1})])),_:1}),d(p,{span:10},{default:i((()=>[d(D,{name:"score"},{default:i((()=>[d(g,{clearable:!1,type:"number",modelValue:c.formData.score,"onUpdate:modelValue":a[5]||(a[5]=e=>c.formData.score=e)},null,8,["modelValue"])])),_:1})])),_:1}),d(p,{span:3},{default:i((()=>[d(f,null,{default:i((()=>[r("分")])),_:1})])),_:1})])),_:1}),d(_,{class:"uni-row"},{default:i((()=>[d(p,{span:20},{default:i((()=>[d(f,null,{default:i((()=>[r("答题后,显示答案")])),_:1})])),_:1}),d(p,{span:2},{default:i((()=>[d(D,{name:"showRight"},{default:i((()=>[d(y,{color:"#4674f6",checked:c.formData.showRight,onChange:a[6]||(a[6]=()=>{this.formData.showRight=!this.formData.showRight})},null,8,["checked"])])),_:1})])),_:1})])),_:1}),d(_,{class:"uni-row"},{default:i((()=>[d(p,{span:20},{default:i((()=>[d(f,null,{default:i((()=>[r("选项乱序  "),d(b,{src:j,style:{width:"50rpx",height:"25rpx","margin-right":"10rpx"},alt:"",srcset:""})])),_:1}),d(f,{style:{color:"#999999","font-size":"14px"}},{default:i((()=>[r("选项随机排序，避免背答案")])),_:1})])),_:1}),d(p,{span:2},{default:i((()=>[d(D,{name:"optionOrder"},{default:i((()=>[d(y,{color:"#4674f6",checked:c.formData.optionOrder,onChange:a[7]||(a[7]=e=>m.vipSwitch("optionOrder"))},null,8,["checked"])])),_:1})])),_:1})])),_:1}),d(_,{class:"uni-row"},{default:i((()=>[d(p,{span:20},{default:i((()=>[d(f,null,{default:i((()=>[r("错题优先  "),d(b,{src:j,style:{width:"50rpx",height:"25rpx","margin-right":"10rpx"},alt:"",srcset:""})])),_:1})])),_:1}),d(p,{span:2},{default:i((()=>[d(D,{name:"worongPrior"},{default:i((()=>[d(y,{color:"#4674f6",checked:c.formData.worongPrior,onChange:a[8]||(a[8]=e=>m.vipSwitch("worongPrior"))},null,8,["checked"])])),_:1})])),_:1})])),_:1}),d(_,{class:"uni-row"},{default:i((()=>[d(p,{span:20},{default:i((()=>[d(f,null,{default:i((()=>[r("未做优先  "),d(b,{src:j,style:{width:"50rpx",height:"25rpx","margin-right":"10rpx"},alt:"",srcset:""})])),_:1})])),_:1}),d(p,{span:2},{default:i((()=>[d(D,{name:"doneNot"},{default:i((()=>[d(y,{color:"#4674f6",checked:c.formData.doneNot,onChange:a[9]||(a[9]=e=>m.vipSwitch("doneNot"))},null,8,["checked"])])),_:1})])),_:1})])),_:1}),d(_,{class:"uni-row"},{default:i((()=>[d(p,{span:5},{default:i((()=>[d(f,null,{default:i((()=>[r("多选计分")])),_:1})])),_:1}),d(p,{span:19},{default:i((()=>[d(D,{name:"moreDataWay"},{default:i((()=>[d(R,{modelValue:c.formData.moreDataWay,"onUpdate:modelValue":a[10]||(a[10]=e=>c.formData.moreDataWay=e),localdata:c.range,onChange:e.change,label:"请选择"},null,8,["modelValue","localdata","onChange"])])),_:1})])),_:1})])),_:1}),d(_,{class:"uni-row"},{default:i((()=>[d(T,{type:"primary",class:"btn-submit",onClick:m.submitForm},{default:i((()=>[r("开始考试")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","rules"])])),_:1})])),_:1})}],["__scopeId","data-v-240ef640"]]);export{O as default};
