import{p as t,q as e,B as a,t as i,o as s,d as n,w as l,m as o,e as r,i as u,G as p,H as c,x as g,A as m,F as d,l as f,D as v,T as h,E as _}from"./index-708d8c77.js";import{_ as y,a as x}from"./uni-row.7b8cdd96.js";import{r as k}from"./uni-app.es.83c46ea6.js";import{_ as w}from"./uni-icons.45c91a6e.js";import{_ as I}from"./uni-badge.024f76f6.js";import{_ as C}from"./maskGroup.431d6531.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";const L=""+new URL("vip-bc-a8f8d00a.png",import.meta.url).href,T=""+new URL("VIP-a2bbb7e4.png",import.meta.url).href;const S=b({onShow(){t("token"),e.wxLogin(),this.init(),this.getVipStatic(),this.getMessage()},computed:{vipType(){let t=this.userInfo;return{1001:`VIP会员(${t.vipExpirationTime})到期`,1002:`SVIP会员(${t.vipExpirationTime})到期`}[t.vipFlag]},vipDownNum(){let t=this.vipStatistic;return`剩余下载次数${t.downloadCount||0} 剩余搜索次数${t.searchCount||0}`}},data:()=>({value:1,userInfo:{},minAppNewUserFlag:!0,vipStatistic:{},iconList:[{img:"../../static/my/collage.png",url:"./myCollect/myCollect",text:"我的收藏"},{img:"../../static/my/history.png",text:"搜题记录",url:"./searchHistory/searchHistory"},{img:"../../static/my/down.png",text:"文档下载",url:"./docDownList/docDownList"},{img:"../../static/my/questionErr.png",text:"全部错题",url:"./errQuestionList/errQuestionList"}],navList:[{img:"../../static/my/Notifications.png",navigator:"./message/message",text:"我的消息"},{img:"../../static/my/inviteCode.png",text:"输入邀请码",navigator:"./cdKey/cdKey"},{img:"../../static/my/help.png",text:"帮助中心",navigator:"./help/help"},{img:"../../static/my/feedback.png",text:"意见反馈",navigator:"../addErrorQuestion/index?feedType=feedBack"},{img:"../../static/my/Settings.png",text:"设置",navigator:"./setting"}]}),methods:{jumpPage(t){a({url:t.url})},login(){console.log("navigateTo"),a({url:"../login/login",animationType:"slide-in-top",animationDuration:200})},getMessage(){let t={params:{},callBack:t=>{this.messageList=t.records;let e=0;t.records.map((t=>{t.readFlag||(e+=1,console.log("num",e))})),this.value=e}};this.$http("getMessageList",t)},getVipStatic(){let t={params:{},callBack:t=>{console.log("res用户返回的数据",t),i("vipStatistic",t),this.vipStatistic=t}};this.$http("getVipStatic",t)},init(){let a=t("userInfo");a?(this.userInfo=a,this.minAppNewUserFlag=a.minAppNewUserFlag):(e.wxLogin(),setTimeout((()=>{this.userInfo=t("userInfo")}),500))},navigatorToPage(t){console.log("e",t),a({url:t})},bindGetUserInfo(t){i("encryptedDataUserInfo",t.detail.encryptedData),i("ivUserInfo",t.detail.iv)},goVip(){a({url:"../vip/vip"})},change(){console.log("点击")}}},[["render",function(t,e,a,i,b,S){const U=f,j=k(v("uni-col"),y),V=h,D=_,F=o,N=k(v("uni-row"),x),P=k(v("uni-icons"),w),G=k(v("uni-badge"),I);return s(),n(F,{class:"container"},{default:l((()=>[r(F,{class:"avatar-info"},{default:l((()=>[r(N,{class:"header-uni"},{default:l((()=>[r(j,{span:4},{default:l((()=>[r(U,{class:"avatar-img",src:C,alt:""})])),_:1}),b.userInfo.nickName?(s(),n(j,{key:1,span:10},{default:l((()=>[r(F,{class:"user-phone"},{default:l((()=>[r(D,{class:"phone"},{default:l((()=>[u(p(b.userInfo.nickName),1)])),_:1}),c("br"),r(D,{class:"id-num"},{default:l((()=>[u(p(b.userInfo.mobilephone),1)])),_:1})])),_:1})])),_:1})):(s(),n(j,{key:0,span:10},{default:l((()=>[r(F,{onClick:S.login,class:"user-phone"},{default:l((()=>[r(V,{class:"login-btn",size:"mini",type:"primary","open-type":"getUserInfo",withCredentials:"true",onGetuserinfo:S.bindGetUserInfo},{default:l((()=>[u("登陆刷题通")])),_:1},8,["onGetuserinfo"]),r(D,{class:"id-num"})])),_:1},8,["onClick"])])),_:1}))])),_:1})])),_:1}),r(N,null,{default:l((()=>[(s(!0),g(d,null,m(b.iconList,((t,e)=>(s(),n(F,{index:e,key:e,onClick:e=>S.jumpPage(t)},{default:l((()=>[r(j,{span:6},{default:l((()=>[r(F,{class:"grid-item-box"},{default:l((()=>[r(U,{class:"icon-img",src:t.img,alt:t.text},null,8,["src","alt"]),r(D,{class:"text"},{default:l((()=>[u(p(t.text),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["index","onClick"])))),128))])),_:1}),r(N,null,{default:l((()=>[1001==b.userInfo.vipFlag||1002==b.userInfo.vipFlag?(s(),n(F,{key:0,class:"item-vip",onClick:S.goVip},{default:l((()=>[r(F,{class:"vip-text"},{default:l((()=>[u(p(S.vipType),1)])),_:1}),r(F,{class:"vip-text-down"},{default:l((()=>[u(p(S.vipDownNum),1)])),_:1}),r(U,{class:"img-vip",src:L,alt:"vip",width:"100%"})])),_:1},8,["onClick"])):(s(),n(F,{key:1,class:"item-vip",onClick:S.goVip},{default:l((()=>[r(U,{class:"img-vip",src:T,alt:"vip",width:"100%"})])),_:1},8,["onClick"]))])),_:1}),r(N,null,{default:l((()=>[r(F,{class:"nav-list"},{default:l((()=>[(s(!0),g(d,null,m(b.navList,((e,a)=>(s(),n(F,{class:"nav-item",key:a},{default:l((()=>[r(F,{class:"nav-icon"},{default:l((()=>[r(U,{class:"nav-img",src:e.img,alt:"item.text",width:"64px"},null,8,["src"])])),_:2},1024),r(F,{class:"nav-box",onClick:t=>S.navigatorToPage(e.navigator)},{default:l((()=>[r(D,null,{default:l((()=>[u(p(e.text),1)])),_:2},1024),r(F,null,{default:l((()=>[0===a&&b.value>0?(s(),n(G,{key:0,"custom-style":{marginTop:"20rpx",marginLeft:"100rpx"},class:"uni-badge-left-margin","is-dot":t.truea,text:b.value,absolute:"rightTop",size:"small"},{default:l((()=>[r(P,{type:"forward",size:"16"})])),_:1},8,["is-dot","text"])):(s(),n(P,{key:1,type:"forward",size:"16"}))])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-d43a0e89"]]);export{S as default};
