"use strict";const e=require("../../common/vendor.js"),o=require("../../utils/wechat.js");if(require("../../utils/http.js"),require("../../utils/config.js"),require("../../utils/api.js"),!Array){(e.resolveComponent("uni-segmented-control")+e.resolveComponent("uni-section")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control.js")+(()=>"../../uni_modules/uni-section/components/uni-section/uni-section.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js")+e.unref(t))();const t=()=>"../../components/Ksp-Cropper/index.js",n={__name:"index",setup(t){const n=e.getCurrentInstance(),{$http:r}=n.appContext.config.globalProperties;e.onReady((()=>{o.wechat.wxLogin()})),e.onShow((()=>{let o=e.index.getStorageSync("token");v(),o&&w()})),e.onLoad((()=>{}));const a=e.ref(null),c=["A","B","C","D"],s=o=>{e.index.navigateTo({url:0===o?"../index/search?type=0":"./docSearch"})};let i=e.ref(["热门文档","我的题库"]),u=e.ref(0);e.ref(0);let l=e.ref("#007aff"),d=e.ref("text"),g=e.ref(""),f=e.ref("");e.ref("");let p=e.ref(!0);const m=e.reactive({page:1,size:10});let h=e.ref([]);const v=()=>{let e={params:{page:m.page,size:m.size},callBack:e=>{h.value=e.records.filter((e=>e.hotFlag)),console.log(h,"获取分页文档")}};r("getDocumentList",e)},x=()=>{e.index.chooseImage({count:1,encoding:"base64",success:e=>{g.value=e.tempFilePaths[0]}})},y=e=>{p.value=e.show};let b=e.ref([]);const w=()=>{r("indexPageCollectList",{callBack:e=>{console.log("获取的列表",e),b.value=e}})};let I=e.ref([]);const j=o=>{I.value=[],e.index.showLoading({title:"加载中"}),r("imgSearchBase64",{params:{ecode:o,page:1,size:10},callBack:o=>{e.index.hideLoading(),(o.code=1200)?(I.value=o.records,a.value.open("bottom")):e.index.showToast({title:o.message,icon:"error",duration:1e3}),console.log("e",o)}})},S=e.ref(""),C=o=>{var t;g.value="",S.value=o.path,t=o.path,e.pathToBase64(t).then((e=>{j(e.split("data:image/png;base64,")[1])})).catch((e=>{console.error(e)}))},k=()=>{g.value=""},q=e=>{u.value!==e.currentIndex&&(u.value=e.currentIndex)};return(o,t)=>e.e({a:"overflow:"+(e.unref(p)?"hidden":"visible"),b:e.o(x),c:e.o((e=>s(0))),d:e.o((e=>s(1))),e:e.o(q),f:e.p({current:e.unref(u),values:e.unref(i),"style-type":e.unref(d),"active-color":e.unref(l)}),g:0===e.unref(u)},0===e.unref(u)?e.e({h:0===e.unref(h).length},0===e.unref(h).length?{}:{i:e.f(e.unref(h),((o,t,n)=>({a:o.coverImage,b:e.t(o.docName),c:e.f(o.tags,((t,n,r)=>e.e({a:e.t(t),b:n!=o.tags.length-1},(o.tags.length,{}),{c:t}))),d:e.t(o.downloadNum),e:e.o((t=>(o=>{console.log(o),e.index.setStorageSync("docDetail",o),e.index.navigateTo({url:"../docView/docView"})})(o)),o.docId),f:o.docId})))}):{},{j:1===e.unref(u)},1===e.unref(u)?{k:e.f(e.unref(b),((o,t,n)=>({a:e.t(o.category.categoryName),b:e.t(o.categoryQuestionNum),c:e.t(o.createTime),d:t,e:e.o((t=>(o=>{console.log("item",o),e.index.setStorageSync("categoryId",o.categoryId),e.index.navigateTo({url:`../constructor/constructorItem?categoryId=${o.categoryId}&categoryName=${o.category.categoryName}`})})(o)),t)})))}:{},{l:e.unref(I).length>0},e.unref(I).length>0?{m:e.f(e.unref(I),((o,t,n)=>({a:e.t(t+1),b:e.t(o.questionTitle),c:e.f(o.options,((o,t,n)=>({a:e.t(c[t]),b:e.t(o),c:t}))),d:e.f(o.rightOptions,((o,t,n)=>({a:e.t(o),b:t}))),e:e.t(o.analysis||"暂无"),f:t})))}:{},{n:e.sr(a,"31d0b3dc-2",{k:"popup"}),o:e.o(y),p:e.p({"background-color":"#fff"}),q:e.unref(f),r:e.o(k),s:e.o(C),t:e.p({mode:"free",width:600,height:440,maxWidth:1024,maxHeight:1024,url:e.unref(g)})})}};wx.createPage(n);
