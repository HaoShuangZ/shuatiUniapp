import{af as e}from"./index-25a8f5ab.js";function n(n){return new Promise((function(t,o){if("object"==typeof window&&"document"in window){if("function"==typeof FileReader){var i=new XMLHttpRequest;return i.open("GET",n,!0),i.responseType="blob",i.onload=function(){if(200===this.status){let e=new FileReader;e.onload=function(e){t(e.target.result)},e.onerror=o,e.readAsDataURL(this.response)}},i.onerror=o,void i.send()}var r=document.createElement("canvas"),a=r.getContext("2d"),s=new Image;return s.onload=function(){r.width=s.width,r.height=s.height,a.drawImage(s,0,0),t(r.toDataURL()),r.height=r.width=0},s.onerror=o,void(s.src=n)}"object"!=typeof plus?"object"==typeof wx&&e("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:n,encoding:"base64",success:function(e){t("data:image/png;base64,"+e.data)},fail:function(e){o(e)}}):o(new Error("not support")):plus.io.resolveLocalFileSystemURL(function(e){if(0===e.indexOf("_www")||0===e.indexOf("_doc")||0===e.indexOf("_documents")||0===e.indexOf("_downloads"))return e;if(0===e.indexOf("file://"))return e;if(0===e.indexOf("/storage/emulated/0/"))return e;if(0===e.indexOf("/")){var n=plus.io.convertAbsoluteFileSystem(e);if(n!==e)return n;e=e.substr(1)}return"_www/"+e}(n),(function(e){e.file((function(e){var n=new plus.io.FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){o(e)},n.readAsDataURL(e)}),(function(e){o(e)}))}),(function(e){o(e)}))}))}export{n as p};
